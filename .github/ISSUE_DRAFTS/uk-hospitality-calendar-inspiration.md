Title: UK Hospitality Calendar Inspiration — 12‑Month Events, Monthly Cron, 250‑Word Briefs

Summary

- Goal: Provide hospitality‑relevant daily/weekly events with high commercial potential, each with a 250‑word text brief, and keep the calendar populated 12 months ahead via a monthly cron. Ideas are centrally stored (not generated per tenant) and are channel‑agnostic.
- Regions/Language: UK only, English.
- Display: Highlight at most two opportunities per day; do not fill every day. Include a weekly top‑picks panel.
- Personalization: Respect sports/alcohol user toggles and alcohol‑free venues at display time; otherwise ideas are shared globally.

Scope

- Categories: Seasonal/civic/food/drink and major UK sports tentpoles (finals/key matchdays for UK competitions or hosted in the UK). Exclude non‑UK‑centric observances.
- Channel: Agnostic (briefs are reusable across social/GBP/etc.).
- Segments: Use onboarding answers for relevance filtering only; a single brief per event for all segments.
- Sources: Open/public only (no paid feeds). Code/CSV updates are acceptable for now (no admin UI required).

Decisions Locked

- 250‑word event briefs: Centrally generated by an offline pipeline and stored in DB; refreshed as part of ongoing operations without manual review/PRs.
- Content constraints: Text only; no emojis, no prices/discount values, no external links, avoid trademark‑restricted terms. Include plain‑text hashtags and image/asset suggestions within the brief (still text‑only).
- Alcohol handling: Mark events that are alcohol‑related, include a short DrinkAware note in the brief, and hide for alcohol‑free venues.
- Cron: Run on the 1st of each month at 02:00 Europe/London; maintain a rolling 12‑month horizon (populate next 13 months to avoid edge gaps).

Great Data (Open/Public)

- UK Government bank holidays (official JSON).
- Computed movable feasts (Easter, Shrove Tuesday, Mother’s Day UK), using reliable algorithms/libraries.
- Cultural/seasonal/food/drink observances (official org sites + Wikipedia with sources recorded), e.g., British Pie Week, Burns Night, Pancake Day, Halloween, Valentine’s Day, National Gin & Tonic Day, National Burger Day (UK), Afternoon Tea Week, National Fish and Chips Day, Veganuary, Negroni Week.
- Sports tentpoles with UK focus: Six Nations matchdays (home nations), FA Cup Final, Champions League Final (if hosted in UK that year), Premier League opening/final day, Grand National, Royal Ascot, Wimbledon finals, (others only when UK‑hosted or distinctly UK‑centric). Exclude non‑UK‑centric events.

Data Model (Proposed)

- Event: id, slug, name, aliases[], category [seasonal|civic|food|drink|sports], alcohol_flag (bool), date_type [fixed|recurring|multi_day], rrule/anchor, source_url, notes, active.
- EventOccurrence: id, event_id, start_date, end_date, country="UK", certainty [confirmed|estimated], metadata (e.g., kickoff time when publicly available), created_at, updated_at.
- EventBrief: id, event_id, version, text (≈250 words), constraints_applied [no_emojis|no_links|no_prices], drinkaware_applicable (bool), created_at, updated_at.
- IdeaInstance: id, occurrence_id, rank_score (0–100), diversity_bucket [civic|sports|food_drink|seasonal], tags[], selected (bool), created_at, updated_at.
- UserPrefs: user_id, show_sports (bool, default true), show_alcohol (bool, default true), updated_at.
- TenantTraits (existing): alcohol_free (bool), venue_type, etc. (used for display filtering only).

Briefs (250 Words)

- Structure: Summary; date/time specifics (with certainty notes if times are pending); why it matters to hospitality; activation ideas (menu specials, viewing parties, booking prompts, family activities) without prices; content angles (teaser/day‑of/recap), local/community tie‑ins; 5–10 generic hashtags; image/asset brief (as text); accessibility note (suggested alt‑text); DrinkAware note when relevant.
- Constraints: Text only; no emojis, no external links, no prices/discounts; avoid restricted trademarks (use safe phrases like “the big game” when required by policy).
- Generation: Deterministic offline pipeline using fixed prompts/templates; output stored centrally and versioned. No per‑tenant runtime generation.

Scoring & Selection

- Weights: National awareness (0.40), hospitality impact potential (0.35), seasonal/lead‑time fit (0.15), weekday uplift (0.05), sports interest (0.05 when relevant).
- Daily cap: Select top 2 IdeaInstances per day after filtering by certainty and suppression. Allow empty days.
- Diversity tie‑break: When scores are close, prefer civic/seasonal, then sports, then food/drink to avoid monotony.
- Display filtering: Apply user toggles (sports/alcohol) and venue traits (alcohol_free) at render time.

Cron & Idempotency

- Schedule: `02:00 Europe/London` on the 1st of each month.
- Steps:
  - Expand next 13 months of EventOccurrences from Event rules (to keep 12 months always populated).
  - Recompute scores; select top 2 per day with diversity tie‑break.
  - Upsert IdeaInstances idempotently (deterministic key: `event_id + occurrence_date`).
  - Do not mutate historical selections before the current month unless running a backfill.
- Manual backfill command: `backfill-inspiration --from=YYYY-MM --to=YYYY-MM` (dry‑run and idempotent options supported).

Calendar UX

- Inspiration overlay: Toggle on the existing calendar; show colored chips with category and rank badge; hover/click opens a popover.
- Popover: Event summary, dates/times, why it matters, brief preview; actions: “Add Draft”, “Read full brief”, “Snooze”.
- Weekly panel: Default side panel showing the week’s top ~5 picks across categories with lead‑time hints.
- Add Draft: Creates a draft in the existing post composer with the brief inserted into the caption/notes field (channel‑agnostic).

Observability & Metrics

- Success: Idea impressions, brief opens, Add‑Draft clicks, drafts created, publish rate.
- Health: Cron duration, created/updated counts, empty‑day ratio, error rate. Alerts on zero selections or job failures.

Seed Events (UK‑Centric, Non‑Exhaustive)

- Seasonal/Civic: New Year’s Eve/Day, Valentine’s Day, Mother’s Day (UK), Good Friday, Easter Sunday, Early May Bank Holiday, Spring/Christmas/Boxing Day bank holidays, Father’s Day (UK), Halloween, Bonfire Night, Burns Night, Pancake Day, Notting Hill Carnival (focus on opening weekend), Edinburgh Fringe (opening weekend focus).
- Food/Drink: British Pie Week, Afternoon Tea Week, National Gin & Tonic Day (UK), World Cocktail Day, National Burger Day (UK), National Fish and Chips Day, Negroni Week, Veganuary (January).
- Sports (UK focus): Six Nations matchdays (home nations), FA Cup Final, Champions League Final (when hosted in UK), Premier League opening/final day, Grand National, Royal Ascot, Wimbledon finals.

Engineering Tasks

- Migrations:
  - Create tables: `events`, `event_occurrences`, `event_briefs`, `idea_instances`, `user_prefs` (or extend existing prefs).
  - Indexes for `(event_id, date)`, `(occurrence_id)`, and unique key on `(event_id, occurrence_date)`.
- Data ingestion:
  - Add curated CSV/YAML catalog with sources and RRULEs where applicable.
  - Write importer to populate `events` and expand `event_occurrences`.
- Brief generator:
  - Implement offline generator script to produce/update 250‑word briefs with constraints; write to `event_briefs`.
- Scoring & selector:
  - Implement scoring function and diversity tie‑break; upsert `idea_instances` per day (max 2).
- Cron & CLI:
  - Monthly job `populate_inspiration` and manual `backfill-inspiration` command with dry‑run.
- UI:
  - Calendar overlay, popover, weekly panel; Add‑Draft flow to composer; user toggles for sports/alcohol.
- Observability:
  - Metrics, logs, alerts; dashboards for selection counts and failures.

Acceptance Criteria

- The calendar shows at most two inspiration items per day; some days remain empty.
- Data is populated at least 12 months ahead at all times, maintained by a monthly idempotent cron.
- Each selected event has a stored 250‑word text brief with required structure and constraints; alcohol items include a DrinkAware note and are hidden for alcohol‑free venues.
- User can toggle visibility of sports and alcohol events; Add‑Draft creates a draft in the composer with the brief text inserted.
- Catalog contains 80–120 UK events in the first shipment, with sources recorded and non‑UK‑centric dates excluded.

Risks & Notes

- Fixture times for some sports are announced late; mark such occurrences as `estimated` and update when confirmed.
- Trademark sensitivity requires safe terminology for certain events; avoid restricted brand names in briefs.
- No admin UI initially; updates happen via code/CSV and scripted pipelines.

